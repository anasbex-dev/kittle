// === LOCAL ACCESS ===
(async function loadKittleConfig() {
  try {
    await import("./kittle.config.js");
    console.log("✅ kittle.config.js berhasil dimuat!");
  } catch (error) {
    console.error("❌ Gagal memuat kittle.config.js:", error);
  }
})();

// === Jsdelivr ACCESS ===
class Kittle {
  static define(name, component) {
    customElements.define(name, component);
  }
}

(async function loadKittleModules() {
  try {
    const response = await fetch("https://cdn.jsdelivr.net/gh/anasbex-dev/kittle@latest/dist/kittle-manifest.json");
    const data = await response.json();
    
    document.documentElement.style.visibility = "hidden";
    
    const scriptPromises = [];
    
    data.folders.forEach(folder => {
      data.files.forEach(file => {
        const scriptUrl = `${data.basePath}${folder}${file}`;
        const scriptElement = document.createElement("script");
        scriptElement.src = scriptUrl;
        
        const scriptLoaded = new Promise((resolve, reject) => {
          scriptElement.onload = resolve;
          scriptElement.onerror = reject;
        });
        
        document.head.appendChild(scriptElement);
        scriptPromises.push(scriptLoaded);
      });
    });

    await Promise.all(scriptPromises);
    
    document.documentElement.style.visibility = "visible";
    console.log("✅ Semua komponen Kittle berhasil dimuat!");
  } catch (error) {
    console.error("❌ Gagal memuat Kittle:", error);
    document.documentElement.style.visibility = "visible";
  }
})();